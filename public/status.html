<style type="text/css">
    * {
        font-family: 'Roboto', sans-serif;
    }
    th{
        font-size: 20px;
    }
    th, td {
        text-align:center;
    }
    @media only screen and (min-width: 670px) {
        .card-block{
            padding-right: 40px;
            padding-left: 40px;
            padding-bottom: 15px;
            padding-top: 15px;
        }
    }
    @media only screen and (max-width: 670px) {
        .card-block{
            padding:15px;
        }
    }
    </style>
	
	
	<div class="">
                    <div class="page-title">
                        <div>
                            <h3>Device Status</h3>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="container custom_box_shadow" style="width: 70%;vertical-align: center">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <div class="card" style="width: 100%;vertical-align: center;background-color: #FFF;">
                                    <!-- Form entry for preferences: Utkarsh Patil -->
                                    <div class="card-block">
                                        <br />

                                        <table class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Device Name</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Sound System</td>
                                                    <td><img src="images/online.png" alt="" height="15" width="15"></img></td>
                                                </tr>
                                                <tr>
                                                    <td>Lights</td>
                                                    <td><img src="images/online.png" alt="" height="15" width="15"></img></td>
                                                </tr>
                                                <tr>
                                                    <td>Servo Motor</td>
                                                    <td><img src="images/online.png" alt="" height="15" width="15"></img></td>
                                                </tr>
                                                <tr>
                                                    <td>Temperature & Humidity Sensor</td>
                                                    <td><img src="images/online.png" alt="" height="15" width="15"></img></td>
                                                </tr>
                                                <tr>
                                                    <td>Gyroscope 1</td>
                                                    <td><img id="gyroscope1" src="images/online.png" alt="" height="15" width="15"></img></td>
                                                </tr>
                                                <tr>
                                                    <td>Gyroscope 2</td>
                                                    <td><img id="gyroscope2" src="images/online.png" alt="" height="15" width="15"></img></td>
                                                </tr>
                                                <tr>
                                                    <td>Motion Sensor</td>
                                                    <td><img src="images/online.png" alt="" height="15" width="15"></img></td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <script type="text/javascript">
                var wsUri = "ws://lightsout.mybluemix.net/ws/status";
                var ws = new WebSocket(wsUri);

                setInterval(function() {
                    console.log("Interval expired, refreshing websocket");
                    // only closing because the on close method automatically opens a new websocket
                    ws.close();
                }, 300000);
                updateWebsocket(ws);

                function updateWebsocket(ws) {
                    ws.onopen = function(ev) {
                        console.log("SOCKET");
                    };
                    ws.onclose = function(ev) {
                        console.log("DISCONNECTED");
                        window.WebSocket = window.WebSocket || window.MozWebSocket;
                        ws = new WebSocket("ws://lightsout.mybluemix.net/ws/status");
                        updateWebsocket(ws);
                    }

                    ws.onmessage = function(ev) {
                        var changeData = JSON.parse(ev.data);  
                        console.log(changeData["d"]["mpuDev1"]); 
                        console.log(changeData["d"]["mpuDev2"]); 
                        if(changeData["d"]["mpuDev1"])
                            document.getElementById("gyroscope1").src = "images/offline.png"
                        else
                            document.getElementById("gyroscope1").src = "images/online.png"
                        if(changeData["d"]["mpuDev2"])
                            document.getElementById("gyroscope2").src = "images/offline.png"
                        else
                            document.getElementById("gyroscope2").src = "images/online.png"
                    }

                     };
                </script>